import{S as t,s as i}from"./vendor.ec54b159.js";var e,s;(s=e||(e={})).HDD35="3.5' HDD",s.HDD25="2.5' HDD",s.SSD25="2.5' SSD",s.NVME="NVMe";var h,o,r,n;(o=h||(h={})).Vertical="Vertical",o.Horizontal="Horizontal";class a{constructor(i,s,o,r){var n,a,d;this.name=i,this.size=s,this.width=70,this.height=15,s==e.HDD35?(this.width=105,this.height=24):(s==e.HDD25||e.SSD25,this.width=70,this.height=15),this.class_tag=void 0!==r?r:"HardDrive",void 0!==o?this.orientation=o:(this.orientation=h.Horizontal,n=0);var l="HDD"+this.name;this.svg=t().group(),this.svg.attr("id",l),this.svg.addClass(this.class_tag),this.svg.add(t().rect(this.width,this.height).attr({stroke:"#000","stroke-width":2}).radius(this.height/5)),this.svg.add(t().text(this.size+" "+this.name).font({stroke:"#AAA",fill:"#FFF",strokewidth:"1px",family:"Helvetica",size:12}).build(!0).move(2,0)),a=this.width,d=this.height,this.orientation==h.Vertical&&(this.svg.rotate(90),n=270,a=this.height,d=this.width),this.shape=`\n<fillstroke />\n    <fontsize size="12"/>\n    <roundrect x="%s" y="%s" w="${a}" h="${d}" arcsize="${this.width/5}"/>\n    <text str="${this.size}-${this.name}" x="%s" y="%s" align="left" valign="middle" vertical="0" rotation="${n}" align-shape="1"/>\n<stroke />\n        `}getSVG(){return this.svg}getShape(t,i,e,s){var h=[t,i,e,s],o=0;return this.shape.replace(/%s/g,(()=>h[o++]))}}(n=r||(r={})).Rackmount="Rackmount",n.Tower="Tower",n.Custom="Custom";class d{constructor(i,e,s,o,n,d,l,c,g,v,w){this.name=i,this.size=e,this.hd_slot=s,this.hd_row=o,this.hd_col=n;var S=o*n;this.hd_z=Math.ceil(s/S)-1,this.harddrive_list=new Array(this.hd_slot);for(var u=0;u<this.hd_slot;u++)this.harddrive_list[u]=new a(u,d[u],l);this.width=this.height=this.decoration_x=this.decoration_y=0,e==r.Rackmount?void 0!==c?(this.server_unit=c,this.width=550,this.height=48*this.server_unit,this.decoration_x=100,this.decoration_y=5):console.log("Error: Rackmount BoxType require server_unit"):e==r.Tower?void 0!==c?(this.server_unit=c,this.width=48*this.server_unit,this.height=550,this.decoration_x=5,this.decoration_y=50):console.log("Error: Tower BoxType require server_unit"):void 0!==g&&void 0!==v?(this.width=g,this.height=v,this.decoration_x=100,this.decoration_y=100):console.log("Error: Custom BoxType require width and height"),this.class_tag=void 0!==w?w:"Server",this.svg=t().group(),this.svg.add(t('<server name="'+this.name+'" class="'+this.class_tag+'" type="'+this.size+'" row="'+this.hd_row+'" col="'+this.hd_col+'" z_slot="'+this.hd_z+'">'));let m=t().group();m.add(t().line(0,0,40,0).stroke({width:3,color:"#000"}).move(5,0)),m.add(t().circle().fill("none").stroke({width:3,color:"#000"}).radius(5).move(20,5)),m.add(t().text(this.size).font({family:"Helvetica",size:12}).build(!0).move(5,18)),m.add(t().text(this.name).font({family:"Helvetica",size:12}).build(!0).move(5,30));let p=`\n    <fillstroke />\n    <path>\n        <move x="10" y="10"/>\n        <line x="50" y="10"/>\n    </path>\n    <fillstroke />\n    <ellipse x="25" y="15" w="10" h="10" />\n    <stroke />\n    <fillstroke />\n    <text str="${this.size}" x="10" y="30" align="left" valign="middle" vertical="0" align-shape="1" />\n    <text str="${this.name}" x="10" y="40" align="left" valign="middle" vertical="0" align-shape="1" />\n    <stroke />\n        `;for(var _=Math.floor((this.height-this.decoration_y)/this.hd_row)-2,y=Math.floor((this.width-this.decoration_x)/this.hd_col),D="",f="",x=0;x<this.hd_z+1;x++){let i=t().group(),e=t().rect(this.width,this.height).fill("none").stroke({color:"#000",width:5}).radius(5),s=t().group();for(var k=0;k<this.hd_row;k++){let i=t().group();for(var z=0;z<this.hd_col&&S*x+(this.hd_col*k+z)<this.hd_slot;z++){var $=k*this.hd_col+x*S,H=this.harddrive_list[$+z].height/10,b=this.harddrive_list[$+z].width/10,V=x*(this.height/8),T=x*this.height;l===h.Vertical?i.add(this.harddrive_list[$+z].getSVG().move(0,-y*z)):i.add(this.harddrive_list[$+z].getSVG().move(y*z,0)),f+=`\n    <fillstroke />\n        ${this.harddrive_list[$+z].getShape(this.decoration_x+z*y+V,this.decoration_y+k*_+T,this.decoration_x+z*y+b+V,this.decoration_y+k*_+H+T)}\n    <stroke />`}i.move(this.decoration_x,this.decoration_y+_*k+2),s.add(i)}x>0?(e.attr({stroke:"#555","stroke-dasharray":[5,5]}),D+='\n<save/>\n<dashed dashed="1"/>\n                '):i.add(m.move(10,10)),i.add(e),i.add(s.dmove(5,5)),i.move(x*(this.height/8),(this.hd_z-x)*this.height),D+=`\n    <fillstroke />\n    <rect x="${x*(this.height/8)}" y="${x*this.height}" w="${this.width}" h="${this.height}" />\n    <stroke />`,x>0&&(D+="<restore/>"),this.svg.add(i)}this.shape=`\n<background>\n    <save/>\n    <strokewidth width="3"/>\n    ${p}\n    ${D}\n    <restore/>\n</background>\n<foreground>\n    ${f}\n</foreground>`,console.log("finally shape =="+this.shape)}getSVG(){return this.svg}getShape(){return this.shape}}function l(t){let e=i(t);return s=e,h=/^( * )("[\w]+": )?("[^"]*"|[\w.+-]*)?([,[{])?$/gm,o=function(t,i,e,s,h){var o='<span class="json-value" style="color: navy">',r='<span class="json-string" style="color: olive">',n=i||"";return e&&(n=n+'<span class="json-key" style="color: brown">'+e.replace(/[": ]/g,"")+"</span>: "),s&&(n=n+('"'==s[0]?r:o)+s+"</span>"),console.log("Match "+t),n+(h||"")},JSON.stringify(s,null,3).replace(/&/g,"&amp;").replace(/\\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(h,o);var s,h,o}let c=[e.SSD25,e.SSD25,e.SSD25,e.SSD25,e.SSD25,e.SSD25,e.SSD25,e.SSD25,e.SSD25,e.SSD25,e.SSD25,e.SSD25,e.SSD25,e.SSD25,e.SSD25,e.SSD25,e.SSD25,e.SSD25,e.SSD25,e.SSD25,e.SSD25,e.SSD25,e.SSD25,e.SSD25],g=t().addTo("#box"),v="";var w=new d("Example",r.Rackmount,24,1,24,c,h.Vertical,2);function S(t){console.log("shape="+t),document.getElementById("diastring").innerHTML=v+t+"</shape>"}window.clear=function(t){t.clear()},window.downloadString=function(t,i,e){var s=new Blob([t],{type:i}),h=document.createElement("a");h.download=e,h.href=URL.createObjectURL(s),h.dataset.downloadurl=[i,h.download,h.href].join(":"),h.style.display="none",document.body.appendChild(h),h.click(),document.body.removeChild(h),setTimeout((function(){URL.revokeObjectURL(h.href)}),1500)},window.drawDriveLayout=function(t,i,e,s,h,o,r,n,a,l,c,g,S){var u,m;"Rackmount"==e||"Tower"==e?(w=new d(i,e,s,h,o,r,n,a),m=w.width+6*(w.hd_z+1)*w.server_unit+10,u=w.height*(1+w.hd_z)+10,t.size(m,u)):"Custom"==e&&(w=new d(i,e,s,h,o,r,n,void 0,l,c),m=w.width+10,u=w.height+10,t.size(m,u));return t.add(w.getSVG().move(g,S)),v=`\n<shape h="${u}" w="${m}" aspect="fixed" strokewidth="inherit">\n    <connections>\n        <constraint x="0" y="0" perimeter="1" />\n        <constraint x="0.5" y="0" perimeter="1" />\n        <constraint x="1" y="0" perimeter="1" />\n        <constraint x="0" y="0.5" perimeter="1" />\n        <constraint x="1" y="0.5" perimeter="1" />\n        <constraint x="0" y="1" perimeter="1" />\n        <constraint x="0.5" y="1" perimeter="1" />\n        <constraint x="1" y="1" perimeter="1" />\n    </connections>`,w},window.draw=g,window.showjson=function(t){let i=l(t),e=document.getElementById("jsonstring");i&&e&&(e.innerHTML=i)},window.showShape=S,window.diaShapeDraw=function(t){S(t.getShape())},window.diaShapeHeader=v,window.server_obj=w,g.add(w.getSVG().move(5,5)),g.size(w.width+10*(w.hd_z+1)+10,w.height*(1+w.hd_z)+10);
